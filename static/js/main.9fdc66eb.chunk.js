(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(e,n,r){},16:function(e,n,r){"use strict";r.r(n);var t=r(1),c=r.n(t),o=r(7),i=r.n(o),u=(r(13),r(8)),s=r(3),a=r(2),l=r.n(a),f=function(e){return Math.floor(Math.random()*e)};var x={Cube:[{y:0,x:0},{y:1,x:0},{y:1,x:1},{y:0,x:1}],Line:[{y:0,x:0},{y:0,x:1},{y:0,x:2},{y:0,x:3}],T:[{y:0,x:0},{y:0,x:1},{y:0,x:2},{y:1,x:1}],L:[{y:0,x:0},{y:1,x:0},{y:1,x:1},{y:1,x:2}],l2:[{y:0,x:0},{y:1,x:0},{y:1,x:1},{y:1,x:2}],Z:[{y:0,x:0},{y:0,x:1},{y:1,x:1},{y:1,x:2}],Z2:[{y:1,x:0},{y:1,x:1},{y:0,x:1},{y:0,x:2}],U:[{y:1,x:0},{y:0,x:0},{y:0,x:1},{y:0,x:2},{y:1,x:2}]},y={0:"green",1:"blue",2:"yellow",3:"red"},j=function(e){return{width:e.reduce((function(e,n){return e.add(n.x)}),new Set).size,height:e.reduce((function(e,n){return e.add(n.y)}),new Set).size}},d=function(e,n,r){return r.map((function(r){return{y:e-r.y,x:n+r.x}})).filter((function(e){return e.y>=0&&e.x>=0}))},b=function(e){var n=j(e),r=n.width,t=n.height,c=Math.max(r,t),o=new Array(c).fill(null).map((function(){return new Array(c).fill(null).map((function(){return!1}))}));return e.forEach((function(e){return o[e.y][e.x]=!0})),o.reverse()},v=r(0),h=function(e){var n=e.config,r=e.setBlocks,c=e.isFreeBlocks,o=e.onLose,i=e.active,u=Object(t.useState)({array:[],color:""}),a=Object(s.a)(u,2),h=a[0],p=a[1];return Object(t.useEffect)((function(){var e=function(e){var n=Object.keys(x);return e&&n.includes(e)?x[e]:x[n[f(n.length)]]}(),t=y[f(Object.values(y).length)],u=document.querySelector(".animate");if(u){if(i&&e){var s,a=j(e),l=a.width,v=a.height,h=(s=n.columns-1-l,Math.floor(Math.random()*s)+1),m=0,O=0,w=0;u.style.left=h*n.size+"px",p({array:b(e),color:t});var g=function(r){if(m>0)switch(r.key){case"ArrowLeft":h>0&&c(d(m,h-1,e))&&(h-=1);break;case"ArrowRight":h+j(e).width<n.columns&&c(d(m,h+1,e))&&(h+=1);break;case"ArrowDown":O+=5*n.step,w+=5;break;case"Enter":var t=function(e){var n=function(e){e=e.map((function(e){return e.reverse()}));for(var n=0;n<e.length;n++)for(var r=0;r<n;r++){var t=e[n][r];e[n][r]=e[r][n],e[r][n]=t}return e.filter((function(e){return!e.every((function(e){return!1===e}))})),e}(b(e)),r=[];n.reverse().forEach((function(e,n){return e.forEach((function(e,t){return e?r.push({y:n,x:t}):void 0}))}));var t=[],c=[];for(r.forEach((function(e){t.push(e.x),c.push(e.y)}));t.every((function(e){return e>0}));)r.forEach((function(e){return e.x=e.x-1})),t=t.map((function(e){return e-1}));for(;c.every((function(e){return e>0}));)r.forEach((function(e){return e.y=e.y-1})),t=t.map((function(e){return e-1}));return r}(e);h+j(t).width<=n.columns&&c(d(m,h,t))&&(e=t);break;case" ":for(;m+1<n.rows&&c(d(m+1,h,e));)m+=1}},k=setInterval((function(){O+=n.step,++w>n.size/n.step&&(m<n.rows-1&&c(d(m+1,h,e))?O=(m+=1)*n.size:(O=-200,r(d(m,h,e),t),m<v&&o()),w=0),u&&(u.style.top=O+"px",u.style.left=h*n.size+"px",p({array:b(e),color:t}))}),n.interval);return window.addEventListener("keydown",g),function(){window.removeEventListener("keydown",g),k&&clearInterval(k)}}u.style.top="-200px"}}),[i,n,r]),Object(v.jsx)("div",{className:"animate",children:Object(v.jsx)("div",{children:h.array.map((function(e){return Object(v.jsx)(m,{row:e,color:h.color},l()())}))})})},m=function(e){var n=e.row,r=e.color;return Object(v.jsx)("div",{className:"r",children:n.map((function(e){return e?Object(v.jsx)(p,{color:r},l()()):Object(v.jsx)(O,{},l()())}))})},p=function(e){var n=e.color;return Object(v.jsx)("div",{className:"square "+n})},O=function(){return Object(v.jsx)("div",{className:"offset"})},w={rows:15,columns:10,size:40,interval:10,step:2},g=function(){var e=new Array(w.rows).fill(null).map((function(e){return new Array(w.columns).fill(null).map((function(){return{isFill:!1}}))})),n=Object(t.useState)(e),r=Object(s.a)(n,2),c=r[0],o=r[1],i=Object(t.useState)(!1),a=Object(s.a)(i,2),f=a[0],x=a[1],y=Object(t.useState)(0),j=Object(s.a)(y,2),d=j[0],b=j[1],m=function(){x(!1),o(e),b(0)};return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("div",{className:"game-container b",id:"game-container",children:[Object(v.jsx)("div",{className:"spawn-element b",children:Object(v.jsx)(h,{config:w,setBlocks:function(e,n){var r=0;o((function(t){for(e.forEach((function(e){var r=e.y,c=e.x;return t[r][c]={isFill:!0,color:n}})),t=t.filter((function(e){return!e.every((function(e){return e.isFill}))}));t.length<w.rows;)t.unshift(new Array(w.columns).fill(null).map((function(){return{isFill:!1}}))),r++;return Object(u.a)(t)})),b((function(e){return e+r}))},isFreeBlocks:function(e){return!!e.every((function(e){var n=e.y,r=e.x;return!1===c[n][r].isFill}))},onLose:function(){x(!1),alert("you score : "+d),m()},active:f})}),Object(v.jsx)("div",{children:c.map((function(e){return Object(v.jsx)(E,{row:e},l()())}))}),Object(v.jsx)("button",{onClick:function(){return x(!0)},children:"Start"}),Object(v.jsx)("button",{onClick:m,children:"Reset"}),Object(v.jsx)(k,{count:d})]}),Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("p",{children:"Arrow left/right : control"}),Object(v.jsx)("p",{children:"Enter : flip"}),Object(v.jsx)("p",{children:"Arrow down : speed"}),Object(v.jsx)("p",{children:"Space : set now"})]})]})},k=function(e){var n=e.count;return Object(t.useEffect)((function(){var e=document.querySelector(".score");e&&(e.style.backgroundColor="gold"),setTimeout((function(){e&&(e.style.backgroundColor="transparent")}),1e3)}),[n]),Object(v.jsxs)("span",{className:"score",children:["Score ",n]})},E=function(e){var n=e.row;return Object(v.jsx)("div",{className:"g-row",children:n.map((function(e){return Object(v.jsx)(N,{field:e},l()())}))})},N=function(e){var n=e.field;return Object(v.jsx)("div",{className:n.isFill?"field fill "+n.color:"field empty"})};var S=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(g,{})})};i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(S,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.9fdc66eb.chunk.js.map