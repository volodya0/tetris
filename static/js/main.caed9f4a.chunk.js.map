{"version":3,"sources":["elements.ts","utils.ts","createElement.tsx","gamePlay.tsx","App.tsx","index.tsx"],"names":["random","max","Math","floor","elements","Cube","y","x","Line","T","L","l2","Z","Z2","U","colors","0","1","2","3","getProperties","element","width","reduce","setX","obj","add","Set","size","height","setY","getCurrentCords","map","filter","cordsToArray","cords","fields","Array","fill","forEach","reverse","CreateElement","config","setBlocks","isFreeBlocks","onLose","active","useState","array","color","state","setState","useEffect","type","types","Object","keys","includes","length","getElement","values","block","document","querySelector","stepsOnSquare","step","offsetLeft","columns","offSetTop","offSetTopPx","count","style","left","keyboardHandler","e","key","rotatedElement","rotatedArr","arr","row","column","temp","every","rotateArray","rotatedCords","field","push","undefined","x_arr","y_arr","rotateCords","rows","interval","setInterval","top","window","addEventListener","removeEventListener","clearInterval","className","uniqid","Row","Square","Empty","GamePlay","initial","r","isFill","setActive","score","setScore","reset","id","removed","previous","unshift","p","alert","onClick","Score","backgroundColor","setTimeout","Field","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.caed9f4a.chunk.js","sourcesContent":["import { cords } from './types' \r\n\r\nconst random = (max : number): number => Math.floor(Math.random() * max)\r\n\r\nexport function getElement(type? : string) : cords[]{\r\n  let types : string[] = Object.keys(elements)\r\n  if(type && types.includes(type)) \r\n    return elements[type]\r\n  else\r\n    return elements[types[random(types.length)]]\r\n}\r\n\r\nexport function getColor() : string{\r\n  return colors[random(Object.values(colors).length)]\r\n}\r\n\r\nconst elements : {[key : string] : cords[] } = {\r\n  Cube : [{y:0,x:0}, {y:1,x:0}, {y:1,x:1}, {y:0,x:1}],\r\n  Line : [{y:0,x:0}, {y:0,x:1}, {y:0,x:2}, {y:0,x:3}],\r\n  T :    [{y:0,x:0}, {y:0,x:1}, {y:0,x:2}, {y:1,x:1}],\r\n  L :    [{y:0,x:0}, {y:1,x:0}, {y:1,x:1}, {y:1,x:2}],\r\n  l2:    [{y:0,x:0}, {y:1,x:0}, {y:1,x:1}, {y:1,x:2}],\r\n  Z :    [{y:0,x:0}, {y:0,x:1}, {y:1,x:1}, {y:1,x:2}],\r\n  Z2:    [{y:1,x:0}, {y:1,x:1}, {y:0,x:1}, {y:0,x:2}],\r\n  U :    [{y:1,x:0}, {y:0,x:0}, {y:0,x:1}, {y:0,x:2}, {y:1,x:2}],\r\n}\r\n\r\nconst colors : {[key : number] : string}= {\r\n  0 : 'green',\r\n  1 : 'blue',\r\n  2 : 'yellow',\r\n  3 : 'red'\r\n}\r\n\r\n","import { cords } from \"./types\"\r\n\r\nexport const random = (max : number) : number => Math.floor(Math.random() * max)\r\n\r\nexport const getProperties = (element : cords[]): {width : number, height : number} => {\r\n  return {\r\n    width : element.reduce((setX, obj) => setX.add(obj.x), new Set()).size,\r\n    height : element.reduce((setY, obj) => setY.add(obj.y), new Set()).size,\r\n  }\r\n}\r\n\r\nexport const getCurrentCords = (y : number, x : number, element : cords[]) : cords[] => {\r\n  return element\r\n    .map((obj : cords):cords => { return { y : y - obj.y,  x : x + obj.x}})\r\n    .filter((obj : cords):boolean => obj.y >= 0 && obj.x >= 0)\r\n}\r\n\r\nexport const cordsToArray = (cords : cords[]): boolean[][] => {\r\n  const {width, height} = getProperties(cords)\r\n  const size = Math.max(width, height)\r\n  const fields = new Array(size).fill(null).map(() =>new Array(size).fill(null).map(() => false))\r\n  cords.forEach(obj => fields[obj.y][obj.x] = true)\r\n  return fields.reverse()\r\n}\r\n\r\nconst rotateArray = (arr : boolean[][]): boolean[][] => {\r\n  arr = arr.map(row => row.reverse())\r\n  for (let row = 0; row < arr.length; row++) {\r\n    for (let column = 0; column < row; column++) {\r\n      let temp = arr[row][column]\r\n      arr[row][column] = arr[column][row]\r\n      arr[column][row] = temp\r\n    }\r\n  }\r\n  arr.filter(row => !row.every(e => e === false))\r\n  return arr;\r\n}\r\n\r\nexport const rotateCords = (cords : cords[]) => {\r\n\r\n  let arr = cordsToArray(cords)\r\n  let rotatedArr = rotateArray(arr)\r\n\r\n  let rotatedCords : cords[] = []\r\n  rotatedArr.reverse()\r\n    .forEach((row, y) => row.forEach((field, x) => field? rotatedCords.push({y, x}) : undefined))\r\n\r\n  let x_arr : number[] = [], y_arr : number[] = []\r\n\r\n  rotatedCords.forEach(obj => {\r\n    x_arr.push(obj.x)\r\n    y_arr.push(obj.y)\r\n  })\r\n\r\n  while(x_arr.every(x => x > 0)){\r\n    rotatedCords.forEach(obj => obj.x = obj.x - 1)\r\n    x_arr = x_arr.map(e => e - 1)\r\n  }  \r\n  \r\n  while(y_arr.every(y => y > 0)){\r\n    rotatedCords.forEach(obj => obj.y = obj.y - 1)\r\n    x_arr = x_arr.map(e => e - 1)\r\n  }  \r\n  \r\n  return rotatedCords\r\n}","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable default-case */\r\nimport { useEffect, useState } from \"react\"\r\nimport uniqid from 'uniqid'\r\nimport { getElement, getColor } from \"./elements\"\r\nimport { componentProps, cords } from './types' \r\nimport { getCurrentCords, getProperties, random, rotateCords, cordsToArray} from './utils'\r\n\r\nexport const CreateElement : React.FC<componentProps> = ({config, setBlocks, isFreeBlocks, onLose, active}) => {\r\n\r\n  const [state, setState] = useState<{array:boolean[][], color:string}>({array:[], color:''})\r\n    \r\n  useEffect(() => {\r\n    let element : cords[] = getElement()\r\n    let color : string = getColor()\r\n    let block : HTMLDivElement | null = document.querySelector('.animate')\r\n    \r\n    if(!block) return\r\n\r\n    if(!active || !element){\r\n      block.style.top = -200 + 'px'\r\n      return\r\n    }\r\n\r\n    let {width, height} = getProperties(element)\r\n    let stepsOnSquare : number = config.size / config.step\r\n    let offsetLeft : number =  random((config.columns - 1) - width) + 1\r\n    let offSetTop : number = 0\r\n    let offSetTopPx : number = 0\r\n    let count : number = 0\r\n  \r\n\r\n    block.style.left = offsetLeft * config.size +'px'\r\n    \r\n    setState({\r\n      array : cordsToArray(element),\r\n      color\r\n    })\r\n\r\n    const keyboardHandler = (e : KeyboardEvent) : void => {\r\n    if(offSetTop > 0)\r\n      switch (e.key) {\r\n\r\n        case 'ArrowLeft':\r\n          if(\r\n            offsetLeft > 0 && \r\n            isFreeBlocks(getCurrentCords(offSetTop, offsetLeft - 1, element))&&\r\n            (count + 5 > stepsOnSquare || isFreeBlocks(getCurrentCords(offSetTop - 1, offsetLeft - 1, element)))\r\n          )\r\n            offsetLeft -= 1\r\n        break;\r\n\r\n        case 'ArrowRight':\r\n          if(\r\n            offsetLeft + getProperties(element).width < config.columns && \r\n            isFreeBlocks(getCurrentCords(offSetTop, offsetLeft + 1, element))&&\r\n            (count + 5 > stepsOnSquare || isFreeBlocks(getCurrentCords(offSetTop - 1, offsetLeft + 1, element)))\r\n          )\r\n            offsetLeft += 1\r\n        break;\r\n\r\n        case 'Enter':\r\n          const rotatedElement : cords[] = rotateCords(element)\r\n          if(\r\n            (offsetLeft + getProperties(rotatedElement).width <= config.columns) && \r\n            isFreeBlocks(getCurrentCords(offSetTop, offsetLeft, rotatedElement)) &&\r\n            isFreeBlocks(getCurrentCords(offSetTop-1, offsetLeft, rotatedElement))\r\n          )\r\n          element = rotatedElement\r\n        break;\r\n\r\n        case 'ArrowDown':\r\n          offSetTopPx += config.step * 5\r\n          count += 5\r\n        break;\r\n      \r\n        case ' ' :\r\n          while(offSetTop + 1 < config.rows && isFreeBlocks(getCurrentCords(offSetTop + 1, offsetLeft, element)))\r\n            offSetTop += 1\r\n        break\r\n      }\r\n    }\r\n    \r\n    const onInterval = (): void => {\r\n      if(!block) return\r\n      \r\n      offSetTopPx += config.step\r\n      count++\r\n      if(count > stepsOnSquare){\r\n        if(offSetTop < config.rows - 1 && isFreeBlocks(getCurrentCords(offSetTop+1, offsetLeft, element))){\r\n          offSetTop += 1\r\n          offSetTopPx = offSetTop * config.size;\r\n        }else{\r\n          offSetTopPx = -200\r\n          setBlocks(getCurrentCords(offSetTop, offsetLeft, element), color)  \r\n          if(offSetTop < height) {\r\n            onLose()\r\n          }\r\n        }\r\n        count = 0 \r\n      }\r\n      block.style.left = offsetLeft * config.size + 'px'\r\n      block.style.top = offSetTopPx + 'px'\r\n      setState({\r\n        array: cordsToArray(element),\r\n        color\r\n      })\r\n    }\r\n\r\n    let interval = setInterval(onInterval, config.interval)\r\n    window.addEventListener('keydown', keyboardHandler)  \r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', keyboardHandler) \r\n      interval && clearInterval(interval)\r\n    }\r\n\r\n  }, [active, config, setBlocks])\r\n\r\n  return <div className='animate'>\r\n      <div>{state.array.map(row => <Row row={row} color={state.color} key={uniqid()}/>)}</div>\r\n    </div>\r\n}\r\n\r\nconst Row : React.FC<{row : boolean[], color:string }> = ({row, color}) => <div className='r'>{\r\n  row.map(fill => fill? <Square key={uniqid()} color={color}/>: <Empty key={uniqid()}/>)\r\n}</div>\r\n\r\nconst Square : React.FC<{color : string}> = ({color}) => <div className={'square ' +color} ></div>\r\nconst Empty = () => <div className='offset' ></div>\r\n","/* eslint-disable default-case */\r\nimport { CreateElement } from \"./createElement\"\r\nimport React, {useEffect, useState } from \"react\"\r\nimport uniqid from 'uniqid'\r\nimport { field, cords, configuration } from './types' \r\n\r\nconst config : configuration = {\r\n  rows : 15,\r\n  columns : 10,\r\n  size : 40,\r\n  interval : 10,\r\n  step : 2,\r\n}\r\n\r\nexport const GamePlay = () => {\r\n\r\n  const initial : field[][] = new Array(config.rows).fill(null).map(r =>new Array(config.columns).fill(null).map(() => {return{isFill:false}}))\r\n\r\n  const [state, setState] = useState<field[][]>(initial)\r\n  const [active, setActive] = useState<boolean>(false)\r\n  const [score, setScore]= useState<number>(0)\r\n\r\n  const reset = () : void => {\r\n    setActive(false)\r\n    setState(initial)\r\n    setScore(0)\r\n  }\r\n  \r\n  const onLose = () : void => {\r\n    setActive(false)\r\n    alert('you score : '+ score)\r\n    reset()\r\n  }\r\n\r\n  const setBlocks = (arr : cords[], color : string) : void => {\r\n    let removed = 0\r\n    setState(previous => {\r\n\r\n      arr.forEach(({y, x}) => previous[y][x] = {isFill:true, color})\r\n      previous = previous.filter((row) => !row.every(e => e.isFill))\r\n\r\n      while(previous.length < config.rows){\r\n        previous.unshift(new Array(config.columns).fill(null).map(() => { \r\n          return {isFill:false }\r\n        }))\r\n        removed++\r\n      }\r\n\r\n      return [...previous]\r\n    })\r\n    setScore(p => p + removed)\r\n  }\r\n\r\n  function isFreeBlocks(arr : cords[]): boolean{\r\n    if(arr.every(({y, x}) => state[y][x].isFill === false)){\r\n      return true\r\n    }else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  return <div className='container'>\r\n  <div className=\"game-container b\" id = 'game-container'>\r\n    <div className='spawn-element b'>\r\n      <CreateElement  \r\n        config={config} \r\n        setBlocks={setBlocks} \r\n        isFreeBlocks={isFreeBlocks}\r\n        onLose={onLose}\r\n        active={active}\r\n      />\r\n    </div>\r\n    <div>{state.map(row => <Row row={row} key={uniqid()}/>)}</div>\r\n    <button onClick={() => setActive(true)}>Start</button>\r\n    <button onClick={reset}>Reset</button>\r\n    <Score count={score} />\r\n  </div>\r\n  <div className='info'>\r\n    <p>Arrow left/right : control</p>\r\n    <p>Enter : flip</p>\r\n    <p>Arrow down : speed</p>\r\n    <p>Space : set now</p>\r\n  </div>\r\n  </div>\r\n}\r\n\r\nconst Score : React.FC<{count : number}> = ({count}) =>{\r\n  useEffect(() => {\r\n    let block : HTMLSpanElement | null = document.querySelector('.score')\r\n    if(block)\r\n    block.style.backgroundColor = 'gold'\r\n\r\n    setTimeout(() => {\r\n      if(block)\r\n      block.style.backgroundColor = 'transparent'\r\n    }, 1000)\r\n\r\n  }, [count])\r\n  return <span className='score'>Score {count}</span>\r\n}\r\n\r\nconst Row : React.FC<{row : field[]}> = ({row}) => <div className='g-row'>\r\n    {row.map(field => <Field field={field} key={uniqid()}/>)}\r\n  </div>\r\n\r\nconst Field :  React.FC<{field : field}> = ({field}) =>  <div \r\n    className={field.isFill? 'field fill ' + field.color : 'field empty'}>\r\n  </div>\r\n\r\n","import './App.css';\nimport { GamePlay } from './gamePlay';\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n      <GamePlay/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}